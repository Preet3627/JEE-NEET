
# Universal Data Documentation for AI Agents (JEE Scheduler Pro)
# Version: 14.4.0 (Expanded Schema with Exams & Gradients)

## 1. Core Concept: The Internal Knowledge Base
The AI now operates with a comprehensive, built-in library for **Physics**, **Chemistry**, and **Mathematics**. All academic content generation (tips, flashcards, MCQs, explanations) **must be sourced from this internal knowledge base**. This ensures accuracy and consistency.

**How to Interact:**
- When a user asks for academic content, frame your request to the AI by referencing its library.
- **Example:** "Generate 5 MCQs from the 'Rotational Motion' section of your library."
- **Example:** "Explain 'Integration by Parts' using your internal MATHS knowledge base."
- **Example:** "Create a flashcard deck for 'Trigonometric Identities' based on your library content."

---
## 2. Advanced Text Formatting
To ensure formulas and chemical equations are rendered correctly, use the following formatting in any `title` or `detail` string:

| Notation | Format | Example Input | Renders As |
|---|---|---|---|
| **Bold** | `**text**` | `**Important Formula**` | **Important Formula** |
| **Italics** | `*text*` | `*definition*` | *definition* |
| **Subscript** | `_{...}` or `_` | `H_2O`, `C_6H_{12}O_6` | H₂O, C₆H₁₂O₆ |
| **Superscript**| `^{...}` or `^` | `x^2`, `Fe^{2+}` | x², Fe²⁺ |
| **Logarithm** | `log_{b}(x)` | `log_{10}(100)` | log₁₀(100) |
| **Square Root**| `sqrt(...)` | `sqrt(b^2 - 4ac)` | sqrt(b² - 4ac) |

---
## 3. Custom Widgets
You can instruct the AI to generate content for a custom widget on the dashboard. This is useful for creating quick reference panels, notes, or lists. The output should be a simple title and markdown-compatible content.

**Example Request:** "Create a custom widget with the key formulas for Conic Sections."

**Example JSON Output:**
```json
{
  "custom_widget": {
    "title": "Conic Sections",
    "content": "* **Parabola:** `y^2 = 4ax`\n* **Ellipse:** `x^2/a^2 + y^2/b^2 = 1`\n* **Hyperbola:** `x^2/a^2 - y^2/b^2 = 1`"
  }
}
```

---
## 4. Full JSON Schema (for Code Blocks)
Your entire output must be a single JSON object with these top-level keys. Provide empty arrays `[]` or `null` for types not present.
- `schedules`: Array of schedule items.
- `exams`: Array of exam items.
- `metrics`: Array of results or weaknesses.
- `practice_test`: Object for a practice test, or `null`.
- `flashcard_deck`: Object for a new flashcard deck, or `null`.
- `homework_assignment`: Object for a full homework assignment, or `null`.

### `schedules` Object Schema
| Key | Type | Description |
|---|---|---|
| `id` | string | Unique ID (e.g., "A101"). |
| `type` | string | `"ACTION"` or `"HOMEWORK"`. **Rule:** If the user requests 'PYQs', 'questions', or 'problems', you **MUST** use `HOMEWORK`. |
| `day` | string | Full day name, e.g., `"MONDAY"`. |
| `date` | string | Optional `YYYY-MM-DD` for one-off tasks. |
| `time` | string | Optional for `HOMEWORK`. `HH:MM` format. |
| `title` | string | Task title. Use advanced formatting. |
| `detail`| string | Description. Use advanced formatting. |
| `subject`| string| `"PHYSICS"`, `"CHEMISTRY"`, `"MATHS"`. |
| `category`| string| **For `HOMEWORK`**. `Level-1`, `Level-2`, `PYQ`, etc. |
| `q_ranges`| string | **For `HOMEWORK`**. E.g., `"1-15; 20-25"`. |
| `answers`| string | **For `HOMEWORK`**. Stringified JSON, e.g., `"{\"1\":\"A\", \"2\":\"C\"}"`. |
| `externalLink` | string | Optional URL for online class/resource (e.g. Zoom link). |
| `gradient` | string | Optional Tailwind colors for card background, e.g., `"from-blue-500 to-cyan-500"`. |

### `exams` Object Schema
| Key | Type | Description |
|---|---|---|
| `title` | string | Exam name (e.g. "Mock Test 5"). |
| `subject` | string | `"PHYSICS"`, `"CHEMISTRY"`, `"MATHS"` or `"FULL"`. |
| `date` | string | `YYYY-MM-DD` format. |
| `time` | string | `HH:MM` format. |
| `syllabus` | string | Topics covered in the exam. |

### `flashcard_deck` Object Schema
| Key | Type | Description |
|---|---|---|
| `name`| string | Name of the new deck. |
| `subject` | string | `"PHYSICS"`, `"CHEMISTRY"`, `"MATHS"`. |
| `chapter` | string | Optional: Chapter name for organization. |
| `cards` | array | Array of flashcard objects (`{ "front": string, "back": string }`). |

### `practice_test` or `homework_assignment` Object Schema
| Key | Type | Description |
|---|---|---|
| `questions`| array | Array of question objects. |
| `answers` | string | Stringified JSON of question number to correct answer. |
| `solutions`| string | **For `homework_assignment` (Optional)**. Stringified JSON of question number to detailed solution. |

**Question Object Schema (inside `questions` array):**
| Key | Type | Description |
|---|---|---|
| `number` | integer| Question number, starting from 1. |
| `text` | string | Full question text. Use advanced formatting. |
| `options`| array | For `MCQ`, array of 4 strings. For `NUM`, `[]`. |
| `type` | string | `"MCQ"` or `"NUM"`. |

---
## 5. Scientific Symbols & Diagrams
You can render common scientific and mathematical symbols using LaTeX-like commands in any text field.

| Command    | Renders As |
|------------|------------|
| `\Sigma`   | Σ          |
| `\pi`      | π          |
| `\phi`     | φ          |
| `\theta`   | θ          |
| `\alpha`   | α          |
| `\beta`    | β          |
| `\gamma`   | γ          |
| `\delta`   | δ          |
| `\Delta`   | Δ          |

**Diagrams:** The system **cannot render image-based diagrams**. However, you can create textual descriptions or ASCII art to represent diagrams (e.g. Free Body Diagrams), which will be rendered in a pre-formatted block.

---
## 6. New Features and Admin Controls

### 6.1 Email Verification
User registration now requires email verification. Users will receive a verification link in their email inbox upon registration.

### 6.2 Server Status Endpoint
The system includes a new `/api/status` endpoint that provides real-time information about the health and configuration of various backend services (e.g., database, AI services, WebDAV connections).

### 6.3 Admin-Configurable DJ Drop Sound
Administrators can now set a global DJ drop sound URL via the admin dashboard. This sound will be used by all users unless overridden by their personal settings.

### 6.4 Offline Content Access
Users can now download music and study materials for in-app offline use. This means:
- **Offline Music**: Tracks downloaded from the music library are stored locally and playable without an internet connection.
- **Offline Study Materials**: PDF and image study materials can be downloaded for offline viewing within the app.

### 6.5 Persistent Dashboard Layout
User-customized dashboard layouts (widget arrangement, minimization) are now correctly saved and persist across sessions.

---
## 7. Deep Link Generation for Schedules
The AI agent can generate deep links that, when clicked, directly open the application and prompt the user to add a schedule item (or a batch of items). This is useful for pre-filling schedules or sharing specific tasks.

**Format:**
The deep link should be a URL with the following structure:
`https://<your-app-url>/?action=import_data&data=<URL_ENCODED_JSON>`

Where `<URL_ENCODED_JSON>` is a URL-encoded JSON string containing a single object with a `schedules` array.

**`schedules` Array Format:**
Each item in the `schedules` array should conform to the `schedules` object schema defined in Section 4 of this guide.

**Example Request to AI:**
"Generate a deep link to add a Physics homework task on Monday at 9:00 AM, titled 'Chapter 5 Problems', covering questions 1-10 from Ex 1.2."

**Example JSON Output from AI (which would be URL-encoded and embedded in the deep link):**
```json
{
  "schedules": [
    {
      "id": "H_DL_123456789",
      "type": "HOMEWORK",
      "day": "MONDAY",
      "time": "09:00",
      "title": "Chapter 5 Problems",
      "detail": "Complete questions 1-10 from Exercise 1.2.",
      "subject": "PHYSICS",
      "category": "Level-1",
      "q_ranges": "Ex 1.2: 1-10"
    }
  ]
}
```
**Important:** The AI agent should only generate the JSON data. The frontend application will handle the URL encoding and construction of the full deep link.
